<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>CPSC on Documentation for Hugo Learn Theme</title>
    <link>//localhost:1313/en/kb/projects/cpsc/</link>
    <description>Recent content in CPSC on Documentation for Hugo Learn Theme</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Sat, 05 Feb 2022 10:31:29 -0500</lastBuildDate>
    <atom:link href="//localhost:1313/en/kb/projects/cpsc/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>cpsc prod deploy</title>
      <link>//localhost:1313/en/kb/projects/cpsc/cpsc-prod-deploy/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/projects/cpsc/cpsc-prod-deploy/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: CPSC Prod deploy&#xA;&#xA;Revision History:&#xA;    2021-11-5 08:47:19 - Version 1 created by Bao&#xA;    2022-09-06 11:45:00 - Updated instructions, added event bridge instructions - Andrew&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;CPSC deploy notes&#xA;- log into CPSC AWS Console &amp;gt; ECS &amp;gt; cpsc-d8-ecs-cluster-prod &amp;gt; ECS instances&#xA;- review instance list to find whichever is running a task &#xA;- ssh to that EC2 instance&#xA;sudo -i&#xA;docker ps&#xA;(review the Container ID. select the Container ID that is associated with &amp;#34;ecs-cpsc-d8-ecs-taskdefinition-prod&amp;#34;). Clear the watchdog table with the following command. This is expected to be handled in a different method some time in the future:&#xA;docker exec -it cd33182aabe9 sh -c &amp;#34;/var/www/html/vendor/bin/drush watchdog-delete all&amp;#34;&#xA;&#xA;Log into ci.ctacdev.com &amp;gt; CPSC &amp;gt; CPSC Utilites &amp;gt; cpsc-d8-db-backup &amp;gt; Build with parameters &amp;gt; select environment(for prod, it&amp;#39;ll be prod) &amp;gt; and Go.&#xA;&#xA;Back to AWS Console &amp;gt; ECS &amp;gt; Clusters &amp;gt; select cpsc-d8-ecs-service-prod &amp;gt; Service Name&#xA;look at the Autoscaling tab&#xA;Min tasks: 2&#xA;Max tasks: 24&#xA;&#xA;If the number of containers is high (eg: 10), change maximum to 4 in tf and apply in ctac-terraform-cpsc:&#xA;aws-vault exec cpscmain -- terraform apply --target aws_appautoscaling_target.ecs_service_target&#xA;&#xA;Review the Events and check for logs regarding draining and status.&#xA;&#xA;In ci.ctacdev.com &amp;gt; cpsc-aws-codepipiline-execution &amp;gt; Build with Parameters (select environment eg: prod)&#xA;&#xA;Go back to AWS Console &amp;gt; Code Pipeline &amp;gt; select pipeline &amp;gt; Review status of pipeline&#xA;https://console.aws.amazon.com/codesuite/codepipeline/pipelines/cpsc-d8-codepipeline-prod/view?region=us-east-1&#xA;&#xA;&#xA;&#xA;Go to ECS &amp;gt; Service &amp;gt; Events &amp;gt; review the logs to make sure the service is in a steady state.&#xA;&#xA;Go to RDS &amp;gt; Review number of database connections. If the connections spike or are too high, this indicates a likely problem with the application.&#xA;&#xA;revert the tfapply change after deployment is done.&#xA;&#xA;&#xA;&#xA;Go to Event Bridge &amp;gt; Rules &amp;gt; prod-recall-export&#xA;https://us-east-1.console.aws.amazon.com/events/home?region=us-east-1#/eventbus/default/rules/prod-recall-export&#xA; - Go to the Targets tab&#xA; - Make sure it is set to the latest.&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>CPSC Patching</title>
      <link>//localhost:1313/en/kb/projects/cpsc/cpsc-patching/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>//localhost:1313/en/kb/projects/cpsc/cpsc-patching/</guid>
      <description>&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;patching&#34;&#xA;    &gt;&#xA;        Patching&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-patching/#patching&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: Patching&#34; aria-label=&#34;Anchor to: Patching&#34; href=&#34;#patching&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a&#xA;  class=&#34;gdoc-markdown__link&#34;&#xA;  href=&#34;https://ci.ctacdev.com/view/CPSC/view/CPSC-utilities/&#34;&#xA;&gt;Jenkins Jobs For Docker Hosts&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;OS Patching for static hosts&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;cd ctac_jenkins_shared_library/resources/common/files/patching&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;./run.sh cpsc svcs_stg&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;testing&#34;&#xA;    &gt;&#xA;        Testing&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-patching/#testing&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: Testing&#34; aria-label=&#34;Anchor to: Testing&#34; href=&#34;#testing&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a&#xA;  class=&#34;gdoc-markdown__link&#34;&#xA;  href=&#34;https://cpsc-d8-stg.ctacdev.com&#34;&#xA;&gt;Stage URL&lt;/a&gt; (needs VPN)&lt;/li&gt;&#xA;&lt;li&gt;&lt;a&#xA;  class=&#34;gdoc-markdown__link&#34;&#xA;  href=&#34;https://cpsc-d8-prod.ctacdev.com&#34;&#xA;&gt;Prod URL&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Nessus Scan Reporting</title>
      <link>//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/</guid>
      <description>&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h2 id=&#34;on-the-last-tuesday-of-the-month&#34;&#xA;    &gt;&#xA;        On the Last Tuesday of the month&#xA;    &lt;/h2&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/#on-the-last-tuesday-of-the-month&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: On the Last Tuesday of the month&#34; aria-label=&#34;Anchor to: On the Last Tuesday of the month&#34; href=&#34;#on-the-last-tuesday-of-the-month&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Create &lt;code&gt;cpsc.csv&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;original-instructions&#34;&#xA;    &gt;&#xA;        original instructions&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/#original-instructions&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: original instructions&#34; aria-label=&#34;Anchor to: original instructions&#34; href=&#34;#original-instructions&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;heading&#34;&#xA;    &gt;&#xA;        ```&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/#heading&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: ```&#34; aria-label=&#34;Anchor to: ```&#34; href=&#34;#heading&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;hostlist-cpsc--sed--e--e-cpsc-prodd--e-cpsc-stgd--e-cpsc-devd--awk-ofs-print-1749--cpsccsv&#34;&#xA;    &gt;&#xA;        HostList cpsc | sed -E -e &amp;lsquo;/^cpsc-prod/d&amp;rsquo; -e &amp;lsquo;/^cpsc-stg/d&amp;rsquo; -e &amp;lsquo;/^cpsc-dev/d&amp;rsquo; | awk &amp;lsquo;{OFS=&amp;quot;,&amp;quot;; print $1,$7,$4,$9}&amp;rsquo; &amp;gt; cpsc.csv&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/#hostlist-cpsc--sed--e--e-cpsc-prodd--e-cpsc-stgd--e-cpsc-devd--awk-ofs-print-1749--cpsccsv&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: HostList cpsc | sed -E -e &amp;lsquo;/^cpsc-prod/d&amp;rsquo; -e &amp;lsquo;/^cpsc-stg/d&amp;rsquo; -e &amp;lsquo;/^cpsc-dev/d&amp;rsquo; | awk &amp;lsquo;{OFS=&amp;quot;,&amp;quot;; print $1,$7,$4,$9}&amp;rsquo; &amp;gt; cpsc.csv&#34; aria-label=&#34;Anchor to: HostList cpsc | sed -E -e &amp;lsquo;/^cpsc-prod/d&amp;rsquo; -e &amp;lsquo;/^cpsc-stg/d&amp;rsquo; -e &amp;lsquo;/^cpsc-dev/d&amp;rsquo; | awk &amp;lsquo;{OFS=&amp;quot;,&amp;quot;; print $1,$7,$4,$9}&amp;rsquo; &amp;gt; cpsc.csv&#34; href=&#34;#hostlist-cpsc--sed--e--e-cpsc-prodd--e-cpsc-stgd--e-cpsc-devd--awk-ofs-print-1749--cpsccsv&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;div class=&#34;flex align-center gdoc-page__anchorwrap&#34;&gt;&#xA;    &lt;h3 id=&#34;heading-1&#34;&#xA;    &gt;&#xA;        ```&#xA;    &lt;/h3&gt;&#xA;    &lt;a data-clipboard-text=&#34;//localhost:1313/en/kb/projects/cpsc/cpsc-nessus-scan-reporting/#heading-1&#34; class=&#34;gdoc-page__anchor clip flex align-center&#34; title=&#34;Anchor to: ```&#34; aria-label=&#34;Anchor to: ```&#34; href=&#34;#heading-1&#34;&gt;&#xA;        &lt;svg class=&#34;gdoc-icon gdoc_link&#34;&gt;&lt;use xlink:href=&#34;#gdoc_link&#34;&gt;&lt;/use&gt;&lt;/svg&gt;&#xA;    &lt;/a&gt;&#xA;&lt;/div&gt;&#xA;&lt;p&gt;aws-vault exec cpscmain &amp;ndash; awless list instances &amp;ndash;columns name,state,privateip,uptime &amp;ndash;filter state=running &amp;ndash;format csv &amp;gt; cpsc.csv &amp;amp;&amp;amp; sed -i &amp;rsquo;&amp;rsquo; &amp;rsquo;s/cpsc-dev.&lt;em&gt;//g; s/cpsc-prod.&lt;/em&gt;//g; s/cpsc-stg.*//g; /^$/d&amp;rsquo; cpsc.csv&lt;/p&gt;</description>
    </item>
  </channel>
</rss>

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Syndication on Documentation for Hugo Learn Theme</title>
    <link>//localhost:1313/en/kb/projects/hhs/syndication/</link>
    <description>Recent content in Syndication on Documentation for Hugo Learn Theme</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Sat, 05 Feb 2022 10:31:29 -0500</lastBuildDate>
    <atom:link href="//localhost:1313/en/kb/projects/hhs/syndication/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>cmsmanager_variables</title>
      <link>//localhost:1313/en/kb/projects/hhs/syndication/cmsmanager_variables/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/projects/hhs/syndication/cmsmanager_variables/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;&#xA;Subject: deployed cmsmanager is not created with the latest and correct parameters. After deployment, this file will need to be manually populated in order for the app to work. &#xA;&#xA;Revision History:&#xA;    2017-08-11 09:49:00 - Version 1 created by Andrew O&amp;#39;Dell&#xA;    &#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;&#xA;Note: Here is what the /etc/init/syndication_cmsmanager_stg.conf should look like:&#xA;&#xA;&#xA;&#xA;&#xA;description &amp;#39;syndication_cmsmanager_stg&amp;#39;&#xA;&#xA;start on runlevel [2345]&#xA;stop on runlevel [016]&#xA;&#xA;env MYSQL_PASSWORD=&amp;#34;-----put something here-----&amp;#34;&#xA;env CMSMANAGER_DB_URL=&amp;#34;jdbc:mysql://hhs-rds-shared-java-ruby-stg-1.ctkqhucn2qcz.us-east-1.rds.amazonaws.com:3306/cmsmanager_stage&amp;#34;&#xA;env CMSMANAGER_MAPPINGBASE=&amp;#34;/api/v1/mediaMappings&amp;#34;&#xA;env CMSMANAGER_DEFAULTPASSWORD=&amp;#34;-----put something here-----&amp;#34;&#xA;env CMSMANAGER_SERVER_URL=&amp;#34;https://stage-cmsmanager.digitalmedia.hhs.gov&amp;#34;&#xA;env MYSQL_USER=&amp;#34;synd_stage&amp;#34;&#xA;env CMSMANAGER_ADMINUSERNAME=&amp;#34;syndicationAdmin@hhs.gov&amp;#34;&#xA;env MAIL_PORT=&amp;#34;25&amp;#34;&#xA;env MAIL_HOST=localhost&#xA;env MAIL_DEFAULT_FROM=syndicationAdmin@hhs.gov&#xA;env CMSMANAGER_VERIFYAUTHPATH=/api/v1/authorizations.json&#xA;env CMSMANAGER_SELFAUTHPATH=/api/v1/debug/status.json&#xA;env CMSMANAGER_PUBLICKEY=&amp;#39;-----put something here-----&amp;#39;&#xA;env CMSMANAGER_PRIVATEKEY=&amp;#39;-----put something here-----&amp;#39;&#xA;env CMSMANAGER_SECRET=&amp;#39;-----put something here-----&amp;#39;&#xA;env CMSMANAGER_HELPEMAILADDRESS=&amp;#34;syndicationAdmin@hhs.gov&amp;#34;&#xA;&#xA;chdir /appdata/syndication_cmsmanager_stg&#xA;setuid cmsmanager&#xA;&#xA;exec /usr/bin/java -Xmx768m -Xms256m -Dgrails.env=prod -Dserver.port=8081 -jar /appdata/syndication_cmsmanager_stg/*.war &amp;gt;&amp;gt; /appdata/syndication_cmsmanager_stg/cmsmanager.log &amp;amp;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>syndication deployment tips</title>
      <link>//localhost:1313/en/kb/projects/hhs/syndication/syndication-deployment-tips/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/projects/hhs/syndication/syndication-deployment-tips/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Syndication Deployment Information&#xA;&#xA;Revision History:&#xA;    2015-02-17 14:16:48 - Version 1 created by Paul Rigor&#xA;    2015-03-09 18:57:00 - Added s3 bucket info - prigor&#xA;    2015-03-11 06:30:00 - Added additional deployment info. - prigor&#xA;    2015-03-16 17:39:00 - Corrections - prigor&#xA;    2015-04-06 15:30:00 - Added additional scripts to move war files - prigor&#xA;    2015-04-29 08:00:00 - Added information on &#xA;    2015-06-22 09:22:00 - Updated manet instructions for new HHS environment (java-app user)&#xA;    2015-06-24 07:16:00 - Added tiny url test - prigor&#xA;    2016-08-16 07:16:00 - Updated syndication server hostnames. added section on automated deploy script&#xA;    2017-01-23 23:12:00 - Updated manet start procedures&#xA;    2017-03-02 10:09:00 - added instructions to check App Info&#xA;    2017-04-21 07:21:00 - corrected the startup/shutdown script location&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;&#xA;There are 2 approaches to deploying syndication:&#xA;- 1) synd-auto-deploy.sh - automated deployment; includes MySQL backup and hostname check to ensure the appropriate syndication files are deployed to their respective servers (See section 1).&#xA;- 2) Manual (see section 2). &#xA;&#xA;&#xA;&#xA;Section 1 (Auto deploy script)&#xA;The script can be found in the tools from Bitbucket/CTAC/System Administration or go to this URL:&#xA;https://bitbucket.org/CTACSYSADMIN/sysadmin_tools/src/d194d89a071715e88271298891153bbe553d3279/hhs-syndication/synd-auto-deploy.sh&#xA;&#xA;The same script is to be run on hhs-syndication-app-01 and hhs-syndication-app-02. The script also assumes that youâ€™ll be deploying the entire syndication stack (all wars). &#xA;&#xA;******* Be sure to read the prerequisites before running the script!!!!! ********&#xA;&#xA;After reading the prerequisites and doing the necessary steps, run the script as the root user.&#xA;Once the script is complete on both servers, go down to the URLs section of this KB and verify the URLs come up.&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;Section 2 (Manual deployment)&#xA;hhs-syndication-app-01.prod.hhs.local&#xA;    - syndication storefront as ROOT.war in /appdata/synd/tomcat/webapps&#xA;    - syndication as ROOT.war in /appdata/synd/tomcat/webapps_api&#xA;&#xA;hhs-syndication-app-02.prod.hhs.local:&#xA;    - cmsmanager as ROOT.war in /appdata/synd/tomcat/webapps_cmsmanager&#xA;    - syndication admin as ROOT.war in /appdata/synd/tomcat/webapps_syndicationadmin&#xA;    - tinyurl as ROOT.war in /appdata/synd/tomcat/webapps_tinyurl&#xA;    - tagcloud as ROOT.war in /appdata/synd/tomcat/webapps_tagcloud&#xA;&#xA;db is -hhhs-rds-shared-java-prod.ctkqhucn2qcz.us-east-1.rds.amazonaws.com&#xA;   - it is very important to run mysql_backup cron job (crontab -e  -- as root to find it) on that server prior to deployment.&#xA;&#xA;The .wars for the deployment should be in s3://syndication-wars prior to the deployment&#xA;&#xA;&#xA;to stop syndication (on both servers):&#xA;  /appdata/java-app/tomcat/bin/shutdown.sh&#xA;  Historically the shutdown.sh script has not worked so kill -9 is suggested.&#xA;&#xA;be sure, after stopping tomcat (to check if it is still running .. ps -ef | grep tomcat).. if it is .. kill it.  There is/was a know issue where syndication does not shutdown properly. do not assume.&#xA;&#xA;to make a backup of the wars and remove the old web app directories. [as root]&#xA;&#xA;on 01:&#xA;bdir=`date +%m%d%y`-wars; mkdir /root/${bdir};cp --parents -p /appdata/synd/tomcat/{webapps,webapps_api}/ROOT.war /root/${bdir}; rm -rf /appdata/synd/tomcat/{webapps,webapps_api}/ROOT&#xA;&#xA;on 02:&#xA;bdir=`date +%m%d%y`-wars; mkdir /root/${bdir};cp --parents -p /appdata/synd/tomcat/{webapps_cmsmanager,webapps_syndicationadmin,webapps_tinyurl,webapps_tagcloud}/ROOT.war /root/${bdir};rm -r -f /appdata/synd/tomcat/{webapps_cmsmanager,webapps_syndicationadmin,webapps_tinyurl,webapps_tagcloud}/ROOT&#xA;&#xA;...  move the new wars into the correct webapps dir and rename to ROOT.war&#xA;&#xA;on 01 (from the directory where you downloaded the new wars):&#xA;chown synd:synd *.war&#xA;rm -rf /appdata/synd/tomcat/{webapps,webapps_api}/ROOT;mv Syndication-*.war /appdata/synd/tomcat/webapps_api/ROOT.war;mv SyndicationStorefront-*.war /appdata/synd/tomcat/webapps/ROOT.war&#xA;&#xA;on 02 ((from the directory where you downloaded the new wars)&#xA;chown synd:synd *.war&#xA;rm -r -f /appdata/synd/tomcat/{webapps_cmsmanager,webapps_syndicationadmin,webapps_tinyurl,webapps_tagcloud}/ROOT;mv CmsManager-*.war /appdata/synd/tomcat/webapps_cmsmanager/ROOT.war;mv SyndicationAdmin-*.war /appdata/synd/tomcat/webapps_syndicationadmin/ROOT.war;mv TagCloud-*.war /appdata/synd/tomcat/webapps_tagcloud/ROOT.war;mv TinyUrl-*.war /appdata/synd/tomcat/webapps_tinyurl/ROOT.war;&#xA;&#xA;... make any config or other changes required by the deployment&#xA;&#xA;To start (both servers)&#xA;  /appdata/java-app/tomcat/bin/startup.sh&#xA;  **IMPORTANT: start tomcat as the java-app user: [sudo su - java-app] (DO NOT START SYNDICATION AS ROOT OR ANY OTHER USER)&#xA;&#xA;Be sure to watch the /appdata/java-app/tomcat/logs/catalina.out and the /appdata/syndicationLogs/{apps}/*.logs for issues.&#xA;&#xA;Thumbnail Rendering:&#xA;  As of 04/28/2015 Syndication now uses PhantomJS (http://phantomjs.org) and Manet  (https://github.com/vbauer/manet) to render thumbnails.&#xA;&#xA;To start manet in the background, as the java-app user:&#xA;cd /appdata/bin/manet/bin&#xA;manet --cache 0 ~/.syndication/preview/cache --compresess --cleanup &amp;gt; ~/syndicationLogs/manet.log 2&amp;gt;&amp;amp;1 &amp;amp;&#xA;&#xA;&#xA;&#xA;The URLS:&#xA;&#xA;https://api.digitalmedia.hhs.gov &#xA;https://digitalmedia.hhs.gov &#xA;https://cmsmanager.digitalmedia.hhs.gov &#xA;https://syndicationadmin.digitalmedia.hhs.gov &#xA;https://tagcloud.digitalmedia.hhs.gov &#xA;https://tinyurl.digitalmedia.hhs.gov/{number}&#xA;&#xA;Note: to test tinyurl you must pass a number as the first position of the URI:  e.g. https://tinyurl.digitalmedia.hhs.gov/1&#xA;&#xA;Some admin passwords may be contained in 1Password.&#xA;&#xA;If any problems ... contact Zach or Steffen immediately.   There is a private proddeploy slack channel.  Asked to use that channel.&#xA;&#xA;&#xA;Instructions used for installing Manet/Phantom JS:&#xA;&#xA;As Root user:&#xA;  curl -sL https://deb.nodesource.com/setup | sudo bash -&#xA;  apt-get install -y nodejs&#xA;  npm install npm -g&#xA;  apt-get update&#xA;  apt-get install -y build-essential chrpath libssl-dev libxft-dev&#xA;  apt-get install -y libfreetype6 libfreetype6-dev&#xA;  apt-get install -y libfontconfig1 libfontconfig1-dev&#xA;  cd ~&#xA;  export PHANTOM_JS=&amp;#34;phantomjs-1.9.8-linux-x86_64&amp;#34;&#xA;  wget https://bitbucket.org/ariya/phantomjs/downloads/$PHANTOM_JS.tar.bz2&#xA;  sudo tar xvjf $PHANTOM_JS.tar.bz2&#xA;  sudo mv $PHANTOM_JS /usr/local/share&#xA;  sudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin&#xA;  mkdir -p /appdata/bin&#xA;  chown java-app:java-app /appdata/bin&#xA;As java-app user:&#xA;  cd /appdata/bin&#xA;  s3cmd get s3://ctac-migrate/manet.tbz2&#xA;  chown java-app:java-app manet.tbz2&#xA;  tar -xjvpf manet.tbz2&#xA;  export PATH=â€œappdata/bin/manet/bin:$PATH&amp;#34; &amp;gt;&amp;gt; ~/.profile&#xA;  source ~/.profile&#xA;  mkdir -p /appdata/synd/.syndication/preview/cache&#xA;&#xA;To test Manet:&#xA; $ manet&#xA;&#xA;&#xA;Confirm that manet is running. If not, start it with the following command:&#xA;manet --cache 0 ~/.syndication/preview/cache --compresess --cleanup &amp;gt; ~/syndicationLogs/manet.log 2&amp;gt;&amp;amp;1 &amp;amp;&#xA;&#xA;&#xA;&#xA;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#xA;Misc syndication&#xA;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&#xA;To start solr, as the root user:&#xA;  kill any existing solr processes&#xA;  cd /opt&#xA;  bin/solr start&#xA;&#xA;&#xA;To Confirm the version of syndicationadmin&#xA;- log into https://api.digitalmedia.hhs.gov/appInfo with admin credentials&#xA;- See â€˜App Version:â€™ for the version&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>syndication tmp partition full</title>
      <link>//localhost:1313/en/kb/projects/hhs/syndication/syndication-tmp-partition-full/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/projects/hhs/syndication/syndication-tmp-partition-full/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Syndication /tmp directory disk full from jpg images&#xA;&#xA;Revision History:&#xA;    2016-04-18 10:42:00 - Version 1 created by Bao&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;Related:&#xA;- manet process&#xA;&#xA;If /tmp is full, and the directory contains lots of *.jpg files, all you need to do is restart manet:&#xA;- ssh into the syndication server in question&#xA;- switch to the java-app user&#xA;sudo su - java-app&#xA;- Kill the manet process&#xA;- start manet again (be sure it starts as the java-app user):&#xA;/appdata/bin/manet/bin/manet --cache 0 ~/.syndication/preview/cache --compresess --cleanup &amp;gt; ~/syndicationLogs/manet.log 2&amp;gt;&amp;amp;1 &amp;amp;&#xA;- confirm disk space is reclaimed.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>unsubscribing a user from syndication emails</title>
      <link>//localhost:1313/en/kb/projects/hhs/syndication/unsubscribing-a-user-from-syndication-emails/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/projects/hhs/syndication/unsubscribing-a-user-from-syndication-emails/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Unsubscribing a user from syndication emails&#xA;&#xA;Revision History:&#xA;    2016-01-11 11:52:19 - Version 1 created by Bao&#xA;    2016-02-02 09:43:59 - Version 1.a - update to instructions and add stage URL&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;Relevant URL:&#xA;https://cmsmanager.digitalmedia.hhs.gov&#xA;https://stage-cmsmanager.digitalmedia.hhs.gov&#xA;&#xA;&#xA;- Log into CMS manager&#xA;- Subscriptions &amp;gt; Email Subscriptions&#xA;- Search for the userâ€™s email&#xA;- Remove the user&#xA;&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>

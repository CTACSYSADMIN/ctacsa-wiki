<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Puppet on Documentation for Hugo Learn Theme</title>
    <link>//localhost:1313/en/kb/tools_processes/puppet/</link>
    <description>Recent content in Puppet on Documentation for Hugo Learn Theme</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Sat, 05 Feb 2022 10:31:29 -0500</lastBuildDate>
    <atom:link href="//localhost:1313/en/kb/tools_processes/puppet/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Clear puppet repots in root</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/clear-puppet-repots-in-root/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/clear-puppet-repots-in-root/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysic Corporation)  &#xA;=================================================&#xA;&#xA;Subject: How to clear the /var/opt/lib/pe-puppet/reports&#xA;&#xA;Revision History:&#xA;    2015-11-10 12:06:16 - Version 1 created by Pedro&#xA;&#xA;Details:&#xA;&#xA;Clear space on puppet root file system&#xA;&#xA;- ssh into puppet master&#xA;- sudo su&#xA;- and Run this command:&#xA;find /var/opt/lib/pe-puppet/reports -mmin +200 -type f -print0 | xargs -0 -r rm &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet agent fails via cron not cli</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-agent-fails-via-cron-not-cli/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-agent-fails-via-cron-not-cli/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;IKnowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Puppet agent fails with certificate error from cron/daemon but works via command line&#xA;&#xA;Revision History:&#xA;    2015-05-28 09:19:16 - Version 1 created by Paul Rigor&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;If puppet nodes report unresponsive and puppet agent -t works and you see something similar to below in the logs:&#xA;&#xA;May 28 14:30:38 usa-ruby-01 puppet-agent[1477]: Could not send report: SSL_connect returned=1 errno=0 state=unknown state: certificate verify failed: [unable to get certificate CRL for /CN=puppetmaster.svcs.gsa.local]&#xA;&#xA;check /etc/puppetlabs/puppet/puppet.conf.  Most likely the server config is incorrect.&#xA;&#xA;change:&#xA;&#xA;server = puppetmaster.gsa.local&#xA;&#xA;to&#xA;&#xA;server = puppetmaster.svcs.gsa.local&#xA;&#xA;and restart puppet agent with:&#xA;&#xA;service pe-puppet restart&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet agent run failure class performance</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-agent-run-failure-class-performance/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-agent-run-failure-class-performance/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Puppet Run Failure - Could not autoload puppet/util/instrumentation/listeners/performance: Class Performance is already defined in Puppet::Util::Instrumentation&#xA;&#xA;Revision History:&#xA;    2016-03-29 08:30 - Version 1 created by Paul Rigor&#xA;&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;Puppet console shows the following errors every other run:&#xA;&#xA;err Failed to apply catalog: Could not autoload puppet/util/instrumentation/listeners/performance: Class Performance is already defined in Puppet::Util::Instrumentation&#xA;err Could not autoload puppet/util/instrumentation/listeners/performance: Class Performance is already defined in Puppet::Util::Instrumentation&#xA;&#xA;This could be due to a phantom agent process.&#xA;&#xA;Steps to correct:&#xA;&#xA;Reboot the instance&#xA;&#xA;or&#xA;&#xA;Kill all agent processes:&#xA; - service pe-puppet stop&#xA; - ps -ef | grep agent&#xA;    root     29361     1  0 15:33 ?        00:00:00 /opt/puppet/bin/ruby /opt/puppet/bin/puppet agent agent&#xA; - kill any remaining pids&#xA; - service pe-puppet start&#xA;&#xA;then watch the syslog.&#xA;&#xA;Note:  may take more than one cycle to ensure it is fixed since the error can occur every other agent run.&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet change console unresponsive node timeout setting</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-change-console-unresponsive-node-timeout-setting/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-change-console-unresponsive-node-timeout-setting/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Puppet - Change console setting for unresponsive nodes&#xA;&#xA;Revision History:&#xA;    2016-03-29 09:30 - Version 1 created by Paul Rigor&#xA;&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;If you change any agent&amp;#39;s RunInterval setting in puppet.conf from the default 30 minutes to something longer then the puppet console may report those agents as unresponsive.&#xA;&#xA;The cutoff for considering a node unresponsive defaults to one hour (3600 seconds) , and can be configured with the no_longer_reporting_cutoff setting in /etc/puppetlabs/puppet-dashboard/settings.yml. After modifying the setting.yml file, restart pe-console-services to load the new settings. &#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet error 400 file metadata</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-error-400-file-metadata/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-error-400-file-metadata/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cKnowledge Base Article - CTAC (Communications Training Analysis Corporation)&#xA;=================================================&#xA;&#xA;Subject: Puppet - Error 400 on SERVER: Not authorized to call search on /file_metadata/files&#xA;&#xA;Revision History:&#xA;    2015-03-19 15:10 - Version 1 created by Paul Rigor&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA; If you recieve an error similar to:&#xA;&#xA; Error: /Stage[main]/Sensu/Sensu::Plugin[puppet:///files/sensu_plugins]/File[/etc/sensu/plugins]: Failed to generate additional resources using &amp;#39;eval_generate&amp;#39;: Error 400 on SERVER: Not authorized to call search on /file_metadata/files/sensu_plugins with {:links=&amp;gt;&amp;#34;manage&amp;#34;, :recurse=&amp;gt;true, :checksum_type=&amp;gt;&amp;#34;md5&amp;#34;}&#xA;&#xA;This means that the certname for you host is not authorized to get files from the puppet master.  most likely this is because the hostname, and not the fqdn, were used in puppet.conf as the certname for the agent.&#xA;&#xA;Check /etc/puppetlabs/puppet/fileserver.conf&#xA;&#xA;[files]&#xA;  path /etc/puppetlabs/puppet/files&#xA;  allow *.domain.local&#xA;&#xA;  The allow should match certname in agent&amp;#39;s puppet.conf&#xA;&#xA;[main]&#xA;     certname = fda-jicon-db-01.domain.local&#xA;     vardir = /var/opt/lib/pe-puppet&#xA;     logdir = /var/log/pe-puppet&#xA;     rundir = /var/run/pe-puppet&#xA;&#xA;If it doesn&amp;#39;t... you will get the above error&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be&#xA;disclosed in any manner to a third party without the prior written consent of&#xA;CTAC.&#xA;I:```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet master services wont start after reboot pe37x</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-master-services-wont-start-after-reboot-pe37x/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-master-services-wont-start-after-reboot-pe37x/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)&#xA;=================================================&#xA;&#xA;Subject: puppet-enterprise-3.7.x-does-not-start-after-reboot&#xA;&#xA;Revision History:&#xA;    2015-03-21 10:00 - Version 1 created by Paul Rigor&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA; After installing Puppet Enterprise 3.7.x and rebooting Puppet Enterprise Server (pe-server) and Puppet Console Services (pe-console-services) do not start.&#xA;&#xA;This results in connection refused errors in the logs.&#xA;&#xA;This is a known bug in 3.7.x (https://tickets.puppetlabs.com/browse/ENTERPRISE-502)&#xA;&#xA;Workaround:&#xA;&#xA;/usr/sbin/update-rc.d -f pe-console-services remove&#xA;/usr/sbin/update-rc.d pe-console-services defaults 21 20&#xA;&#xA;/usr/sbin/update-rc.d -f pe-puppetserver remove&#xA;/usr/sbin/update-rc.d pe-puppetserver defaults 21 20&#xA;&#xA;/usr/sbin/update-rc.d -f pe-puppet remove&#xA;/usr/sbin/update-rc.d pe-puppet defaults 19 20&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be&#xA;disclosed in any manner to a third party without the prior written consent of&#xA;CTAC.&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet reinstall</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-reinstall/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-reinstall/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Syndication Database Dump Information&#xA;&#xA;Revision History:&#xA;    2015-12-15 09:43:00 - Version 1 created by Bao&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;&#xA;Back up puppet files&#xA;- Make sure you back up the below files to /root&#xA;root@puppetmaster:/etc/puppetlabs/puppet/hhs_puppet_rp# ls /root/&#xA;fileserver.conf  autosign.conf hiera.yaml  keys  license.key  modules  puppet.conf  &#xA;root@puppetmaster:/etc/puppetlabs/puppet/hhs_puppet_rp#&#xA;&#xA;You will also want to back up the *.pp files&#xA;cd /etc/puppetlabs/puppet/hhs_puppet_rp/environments/production/manifests/&#xA;tar -czpvf puppet-manifests.tar.gz *&#xA;(put this file somewhere safe&#xA;&#xA;&#xA;- stop puppet&#xA;/etc/init.d/pe-puppetserver stop&#xA;(or do a ps -ef and stop whatever puppet services are running)&#xA;&#xA;&#xA;-wget the installer&#xA;wget http://ctac-sysadmin-pub.s3-website-us-east-1.amazonaws.com/puppet-enterprise/puppet-enterprise-3.8.2-ubuntu-14.04-amd64.tar.gz&#xA;- untar the installer&#xA;- run the uninstaller (inside the installer directory)&#xA;- reboot the server&#xA;- cd /root&#xA;- run the installer&#xA;- the installer will prompt you to go to https://puppetmaster.svcs.hhs.local:3000&#xA;- select monolithic&#xA;- Puppet master fqdn:&#xA;puppetmaster.svcs.hhs.local&#xA;- puppet master dns aliases:&#xA;puppet, puppetmaster, puppet.hhs.local, puppetmaster.hhs.local&#xA;- make sure Parser Version is UNCHECKED&#xA;- click through and accept the defaults and click Deploy Now&#xA;- Return to your shell window, and go to /etc/puppetlabs/puppet&#xA;cd /etc/puppetlabs/puppet&#xA;- backup the original conf files&#xA;for x in *.conf; do cp $x $x.orig; done&#xA;for x in *.yaml; do cp $x $x.orig; done&#xA;- Log into puppet console (https://puppetmaster.svcs.hhs.local) &#xA;go to Classification &amp;gt; Classes &amp;gt; pe_console_prune&#xA;Ensure the following:&#xA;- prune_cron_hour = 2&#xA;ensure_prune_cron = “present”&#xA;prune_upto = 15&#xA;click Apply&#xA;&#xA;Return to your ssh window&#xA;- go to the directory where the conf files reside /etc/puppet&#xA;- cp -p /root/*.conf /root/*.yaml .&#xA;- cp -p /root/license.key /etc/puppetlabs/&#xA;chmod 644 license.key&#xA;- modify puppet.conf&#xA;reports = console,puppetdb&#xA;- restart pe-puppetserver&#xA;- mkdir -p /etc/puppetlabs/puppet/hhs_puppet_rp/&#xA;- then copy hhs-puppet-rp.tar.gz here&#xA;- copy /root/keys to /etc/puppetlabs/puppet/&#xA;- change permissions&#xA;cd /opt/puppet/packages/public/3.8.2&#xA;chmod 755 ubuntu-14.04-amd64 -R&#xA;&#xA;&#xA;MISC&#xA;=========================================&#xA;&#xA;When you screw up and remove all the certs&#xA;- disable dns-01 &amp;amp; -02, and run puppet on them last&#xA;puppet agent —disable&#xA;-  re-enable&#xA;puppet agent —enable&#xA;&#xA;&#xA;&#xA;&#xA;- set report time to live&#xA;gem install hiera-eyaml&#xA;gem install faraday&#xA;&#xA;&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppet us ascii error</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppet-us-ascii-error/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppet-us-ascii-error/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Puppet error: invalid byte sequence in US-ASCII at ...&#xA;&#xA;Revision History:&#xA;    2015-08-09 11:37:11 - Version 1 created by Paul Rigor&#xA;&#xA;Details: (include steps to reproduce, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA; This error will not occur on puppet agent -t runs.  Only appears when the agent daemon runs.&#xA;&#xA; To fix th US-ASCII error.. you will need to find the non-printable characters and remove them.   The following are known files that contain non printable characters.&#xA;&#xA; /etc/init/php5-fpm.conf - The Author line contains non-printable characters&#xA;&#xA; /etc/login.defs - There is a line that is suppose to be user&amp;#39;s but the apostrophy is a non-printable character.&#xA;&#xA;Remove the non-printable characters and all will be well.&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be &#xA;disclosed in any manner to a third party without the prior written consent of &#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>puppetmaster sizing and tuning</title>
      <link>//localhost:1313/en/kb/tools_processes/puppet/puppetmaster-sizing-and-tuning/</link>
      <pubDate>Sat, 05 Feb 2022 10:31:29 -0500</pubDate>
      <guid>//localhost:1313/en/kb/tools_processes/puppet/puppetmaster-sizing-and-tuning/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Knowledge Base Article - CTAC (Communications Training Analysis Corporation)  &#xA;=================================================&#xA;&#xA;Subject: Puppetmaster Sizing and Tuning&#xA;&#xA;Revision History:&#xA;    2016-08-02 08:02:11 - Version 1 created by Jeannette Rigor&#xA;&#xA;Details: (include steps to reproduct, symptoms, corrective actions, contact information, links and a any other helpful information)&#xA;&#xA;Puppetmaster Sizing:&#xA;&#xA;For a Monolithic installation:&#xA;&#xA;To manage 10+ nodes:&#xA;Cores - 8&#xA;RAM   - 16 GB&#xA;EC2   - m4.2xlarge instance&#xA;&#xA;Minimum for 2000 nodes&#xA;Cores - 16+&#xA;RAM   - 32+ GB&#xA;EC2   - c4.4xlarge instance&#xA;&#xA;Puppetmaster Tuning:&#xA;&#xA;1) Update Java heaps according to the following recommendations:&#xA;    https://docs.puppet.com/pe/latest/config_monolithic.html&#xA;&#xA;    FOR 8 core 16GB RAM, use the following settings:&#xA;    Update heap sizes for:&#xA;    PE console services       - java_args {&amp;#34;Xmx&amp;#34;:&amp;#34;1024m&amp;#34;,&amp;#34;Xms&amp;#34;:&amp;#34;1024m&amp;#34;}&#xA;    PE Puppet Server service  - java_args {&amp;#34;Xmx&amp;#34;:&amp;#34;3072m&amp;#34;,&amp;#34;Xms&amp;#34;:&amp;#34;3072m&amp;#34;}&#xA;                                increase value to 4096 if you have memory leaks&#xA;    PuppetDB                  - java_args {&amp;#34;Xmx&amp;#34;:&amp;#34;1024m&amp;#34;,&amp;#34;Xms&amp;#34;:&amp;#34;1024m&amp;#34;}&#xA;    ActiveMQ heap             - heap_mb   1024&#xA;&#xA;    How to update java heaps:&#xA;    https://docs.puppet.com/pe/latest/config_java_args.html&#xA;&#xA;2) Update the postgressql resources.&#xA;    In /opt/puppetlabs/server/data/postgresql/9.4/data/postgresql.conf, update the following values:&#xA;    shared_buffers = 4GB&#xA;    work_mem      = 8MB&#xA;&#xA;3) Increase the ulimit for pe-puppet&#xA;    edit /etc/default/&amp;lt;PE SERVICE&amp;gt;&#xA;    add the following line:&#xA;      ulimit -n 32678&#xA;&#xA;Restart all puppet services.&#xA;&#xA;&#xA;&#xA;=================================================&#xA;This document is proprietary and confidential. No part of this document may be&#xA;disclosed in any manner to a third party without the prior written consent of&#xA;CTAC.```&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>
